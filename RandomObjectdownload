from tkinter import *
from tkinter import messagebox
import random
import sqlite3
import tempfile



"""interfaz grafica"""
root=Tk()

root.title("Random Object")

root.resizable(False,False)

root.iconbitmap(r"C:\Users\User\Documents\RandomObjectPrograma\iconoprincipal.ico")

root.geometry("650x350")

ultimapalabra=1.0


class funcionesclass:

	

	def funcionbotoningresardatos():

		if len(datosingresos.get())==0:
			pass
		else:
			textlista.config(state="normal")
			textlista.insert(INSERT,"* "+ str(datosingresos.get())+"\n")
			textlista.config(state="disable")
			datosingresos.delete(0,END)


	def crearlista():
		
		lista=textlista.get(1.0,END).split("*")
		lista.pop(0)
		
		return lista
	

	

def randomizar():

	eleccion=random.choice(funcionesclass.crearlista())
	textresultado.delete(1.0,END)
	textresultado.config(state="normal")
	textresultado.insert(INSERT, (eleccion))
	textresultado.config(state="disable")



def funcionbotonborrardatos():

	textlista.config(state="normal")
	textlista.delete((ultimapalabra),END)
	textlista.config(state="disable")
	textresultado.config(state="normal")
	textresultado.delete(1.0,END)
	textresultado.config(state="disable")




def insertarhistorial():

		miconexion=sqlite3.connect("Historial")

		micursor=miconexion.cursor()

		try:
			micursor.execute('''
			CREATE TABLE Historial(
			ID INTEGER PRIMARY KEY AUTOINCREMENT,
			Datos,
			resultado_random VARCHAR(50))
			''')

		except:

			""

		datos=textlista.get(1.0, END), textresultado.get(1.0,END)

		micursor.execute("INSERT INTO Historial VALUES(NULL,?,?)", (datos))

		miconexion.commit()

		messagebox.showinfo("Historial Insertado","Se insertaron los datos en el historial ")

def verhistorial():

	roothistorial=Tk() 

	roothistorial.resizable(False, False)
	roothistorial.geometry("180x280")
	roothistorial.iconbitmap(r"C:\Users\User\Documents\RandomObjectPrograma\iconohistorialver.ico")
	roothistorial.title("")
	
	idLabel=Label(roothistorial, text="Numero de busqueda")
	idLabel.pack()
	idLabel.place(x=20, y=10)
	miId=Entry(roothistorial)
	miId.pack()
	miId.place(x=20, y=30)
	miId.config(justify="center")


	def buscarinfo():

		mostrarhistorialrandom.config(state="normal")
		mostrarhistorialopciones.config(state="normal")

		mostrarhistorialrandom.delete(0, END)
		mostrarhistorialopciones.delete(1.0,END)

		miconexion=sqlite3.connect("Historial")
		micursor=miconexion.cursor()

		
		micursor.execute("SELECT * FROM Historial WHERE ID="+ miId.get())

		
		
		elusurio=micursor.fetchall()

		
		for usuario in elusurio:

			mostrarhistorialrandom.insert(INSERT,usuario[2])
			mostrarhistorialopciones.insert(INSERT, usuario[1])
		
		
		miconexion.commit()

		mostrarhistorialrandom.config(state="disable")
		mostrarhistorialopciones.config(state="disable")

	botonid=Button(roothistorial, text="Buscar", command=buscarinfo, bg="lightgreen")
	botonid.pack()
	botonid.place(x=50, y=60)


	mostrarhistorialrandom=Entry(roothistorial)
	mostrarhistorialrandom.pack()
	mostrarhistorialrandom.place(x=20, y=100)
	mostrarhistorialrandom.config(state="disable", relief="solid")

	mostrarhistorialopciones=Text(roothistorial)
	mostrarhistorialopciones.place(x=20, y=130,width=120, height=100)
	mostrarhistorialopciones.config(relief="solid", state="disable")

	scrollvert=Scrollbar(roothistorial, command=mostrarhistorialopciones.yview)
	scrollvert.place(x=145, y=130, height=100)

	mostrarhistorialopciones.config(yscrollcommand=scrollvert.set)


	roothistorial.mainloop()		


# def login():
	
# 	rootlogin=Tk()

# 	rootlogin.resizable(False,False)

# 	# raiz.iconbitmap()

# 	rootlogin.geometry("210x230")
	

# 	Labellogin=Label(rootlogin, text="Ingresa tus datos", bg="lightgreen")
# 	Labellogin.place(x=60, y=20)

# 	label2=Label(rootlogin, text="Nombre")
# 	label2.place(x=15, y=80)
	
# 	label3=Label(rootlogin, text="Correo")
# 	label3.place(x=15, y=120)

# 	entrynombre=Entry(rootlogin)
# 	entrynombre.place(x=70, y=80)
	
# 	entrycorreo=Entry(rootlogin)
# 	entrycorreo.place(x=70, y=120)

	
# 	botoningresar=Button(rootlogin, text="Registrar", command=ingresarabasededatos, bg="lightgreen", relief="solid")
# 	botoningresar.place(x=80, y=170, width=60, height=30)	
	

# 	rootlogin.mainloop()

def creador():

	messagebox.showinfo("About It", "Creador: Nicolas Arosemena :)")

barramenu=Menu(root)
root.config(menu=barramenu)	

insertarhistorialmenu=Menu(barramenu, tearoff=0)
insertarhistorialmenu.add_command(label="Insertar", command=insertarhistorial)
insertarhistorialmenu.add_command(label="Ver", command=verhistorial)

about_it=Menu(barramenu, tearoff=0)
about_it.add_command(label="creador",command=creador)

barramenu.add_cascade(label="Historial", menu=insertarhistorialmenu)
barramenu.add_cascade(label="About", menu=about_it)

miframe=Frame()
miframe.pack()
miframe.place(x=100,y=20,width=250, height=220)


datosingresos=Entry(miframe, width="30")
datosingresos.grid(row=0, column=0)
datosingresos.config(relief="solid")


botonIngresarDatos=Button(miframe, text="+", width="3", command=lambda :[funcionesclass.crearlista(), funcionesclass.funcionbotoningresardatos()])
botonIngresarDatos.grid(row=0, column=1, pady=40, padx=1)

botonborrardatos=Button(miframe, text="‚Üê", width="3", command=funcionbotonborrardatos)
botonborrardatos.grid(row=0, column=2, pady=40, padx=1)

textlista=Text(miframe)
textlista.place(x=10, y=100,width=150, height=100)
textlista.config(relief="solid")
textlista.config(state="disable")

scrollvert=Scrollbar(miframe, command=textlista.yview)
scrollvert.place(x=160, y=100, height=100)

textlista.config(yscrollcommand=scrollvert.set)



miframe2=Frame()
miframe2.pack()
miframe2.place(x=200,y=290,width=300, height=50)

botonrandom=Button(miframe2, text="RANDOM", width=40, command=randomizar)
botonrandom.pack()



miframe3=Frame()
miframe3.pack()
miframe3.place(x=380, y=60, width=250, height=220)


imagencorona=PhotoImage(file=r"C:\Users\User\Documents\RandomObjectPrograma\corona1.PNG")



labelcorona=Label(miframe3, image=imagencorona)
labelcorona.place(x=60,y=30)



textresultado=Text(miframe3)
textresultado.pack()
textresultado.place(x=40, y=140, width=150, height=20)
textresultado.config(relief="solid", state="disable")



# miframe4=Frame()
# miframe4.pack()
# miframe4.place(x=530, y=10, width=110, height=30)

# botonlogin=Button(miframe4, text="Log in")
# botonlogin.pack()



root.mainloop()

